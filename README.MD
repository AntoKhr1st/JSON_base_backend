
# JSON database
Этот проект позволяет хранить JSON документы

## Technologies:
- #### FastAPI <br/>
- #### gRPC <br/>
- #### Swagger UI <br/>
- #### Docker <br/>
- #### Pysondb <br/>
- #### Nginx

# Запуск:
```code
docker-compose build

docker-compose up -d 
```


# Описание

Сервис позволяет сохранять документы определенного формата в базу данных (возможно передавать несколько документов
за раз).
Хранение документов реализовано в Pysondb
Поиск документов организован через сервис FastApi

Для поиска файлов в базе данных после запуска проекта необходимо зайти на 
[http://0.0.0.0:8000/docs#](http://0.0.0.0:8000/docs#)
и следовать подсказкам.<br/>
Докер контейнер с клиентской библиотекой не выполнят запросов к сервису при запуске. Для выполнения тестового запроса
необходимо раскомментировать 11 строку в /gRPC_Client/Dockerfile и пересобрать проект
```code
docker-compose build

docker-compose up -d 
```

## Структура единицы документа
```json
 {
 	"article_id": 12343454462,
 	"text": "Текст публикации...",
     "title": "Заголовок публикации",
     "date": "2022-03-25 12:14:00",
     "lang": "ru",
     "locations": [
     	{
             "lat": 41.12,
 			"lon": -71.34
         },
         {
             "lat": 47.16,
 			"lon": -72.82
         }
     ],
     "semantic_vector": [0.1, 0.03, 0.20 .... n], # вектор 512 значений
     "keywords": ['keyword1', 'keyword2', 'keyword3', .... 'keywordn'],
     "entities": ['entity1_loc', 'entity2_per', 'entity_part1 entity_part2_work_of_art'],
     "themes": ["7585dfb5-cd1c-4f55-8775-6a2c48afc371", "7f2bfdd8-efbc-454d-ad62-c6d9351e7b77", ... n],
     "class": ["7585dfb5-cd1c-4f55-8775-6a2c48afc371", "7f2bfdd8-efbc-454d-ad62-c6d9351e7b77", ... n]
 }

```

# Компоненты:
- nginx в качестве proxy <br/>
- gRPC Api сервис на основе Protocol Buffers (google.protobuf) для оптового сохранения документов <br/>
- Клиентская библиотека для работы с gRPC Api (принимает список документов, отправляет запрос на сохранение в хранилище через gRPC)
- pysondb хранилище
- fastAPI сервис для поиска документов в хранилище по article_id (в запросе список с article_id, в ответе список найденных документов)
- Клиентская библиотека для работы с fastApi (принимает список article_id, отправляет запрос на сервис fastAPI, возвращает список с результатом)

